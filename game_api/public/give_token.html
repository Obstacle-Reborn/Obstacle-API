<!DOCTYPE html>
<html lang="en">
<body>
    <h1>Loading...</h1>
    <script>
        (() => window.onload = () => {
            const loading = document.querySelector('h1');

            const params = document.location.hash.slice(1).split('&').reduce((acc, cur) => {
                const [key, value] = cur.split('=');
                acc[key] = value;
                return acc;
            }, {});

            fetch('/player/give_token', {
                method: 'post',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(params),
            }).then(async res => {
                if (res.ok) {
                    loading.innerText = 'You are all set! You can close this tab now.';
                } else {
                    loading.innerText = 'Something went wrong. Please contact the developers (e.g. @ahmadbky or @MiLTanT on discord).';
                    console.log(await res.text());
                }
            });
        })();
    </script>
</body>
</html>